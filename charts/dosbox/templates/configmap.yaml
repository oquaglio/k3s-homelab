apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "dosbox.fullname" . }}-html
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "dosbox.labels" . | nindent 4 }}
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>DOS Games - K3s Homelab</title>
      <link rel="stylesheet" href="https://v8.js-dos.com/latest/js-dos.css">
      <script src="https://v8.js-dos.com/latest/js-dos.js"></script>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          background: #0a0a0a;
          color: #00ff41;
          font-family: 'Courier New', monospace;
          min-height: 100vh;
        }
        .header {
          text-align: center;
          padding: 20px;
          border-bottom: 2px solid #00ff41;
          background: linear-gradient(180deg, #111 0%, #0a0a0a 100%);
        }
        .header h1 {
          font-size: 2em;
          text-shadow: 0 0 10px #00ff41;
          letter-spacing: 3px;
        }
        .header p {
          color: #00aa28;
          margin-top: 5px;
          font-size: 0.9em;
        }
        .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
        }
        .game-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
          gap: 20px;
          margin-top: 20px;
        }
        .game-card {
          background: #1a1a1a;
          border: 1px solid #333;
          border-radius: 8px;
          padding: 20px;
          cursor: pointer;
          transition: all 0.2s;
        }
        .game-card:hover {
          border-color: #00ff41;
          box-shadow: 0 0 15px rgba(0,255,65,0.2);
          transform: translateY(-2px);
        }
        .game-card h3 {
          color: #00ff41;
          font-size: 1.3em;
          margin-bottom: 5px;
        }
        .game-card .year {
          color: #666;
          font-size: 0.85em;
          margin-bottom: 10px;
        }
        .game-card .desc {
          color: #aaa;
          font-size: 0.9em;
          line-height: 1.4;
        }
        .game-card .license {
          display: inline-block;
          margin-top: 10px;
          padding: 2px 8px;
          font-size: 0.75em;
          border-radius: 3px;
          background: #002200;
          color: #00ff41;
          border: 1px solid #004400;
        }
        #player-container {
          display: none;
          margin-top: 20px;
        }
        #player-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        }
        #player-header h2 {
          color: #00ff41;
        }
        #back-btn {
          background: #1a1a1a;
          color: #00ff41;
          border: 1px solid #00ff41;
          padding: 8px 20px;
          font-family: 'Courier New', monospace;
          font-size: 1em;
          cursor: pointer;
          border-radius: 4px;
        }
        #back-btn:hover {
          background: #002200;
        }
        #dos {
          width: 100%;
          height: 600px;
        }
        .section-title {
          color: #00aa28;
          font-size: 1.1em;
          margin-top: 30px;
          margin-bottom: 5px;
          border-bottom: 1px solid #333;
          padding-bottom: 5px;
        }
        .note {
          color: #666;
          font-size: 0.8em;
          margin-top: 20px;
          text-align: center;
          padding: 10px;
          border-top: 1px solid #222;
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>DOS GAMES ARCADE</h1>
        <p>K3s Homelab // Browser-based DOS Emulation via js-dos</p>
      </div>

      <div class="container">
        <div id="game-list">
          <p class="section-title">FREE GAMES (No license issues)</p>
          <div class="game-grid">

            <div class="game-card" onclick="launchGame('Digger', 'https://v8.js-dos.com/bundles/digger.jsdos')">
              <h3>Digger</h3>
              <div class="year">1983 - Windmill Software</div>
              <div class="desc">Classic mining arcade game. Collect gems while avoiding monsters. Arrow keys to move, F1 for fire.</div>
              <span class="license">Freeware</span>
            </div>

            <div class="game-card" onclick="launchGame('DOOM (Shareware)', 'https://cdn.dos.zone/original/2X/2/2b27cee99e5d6e4ac2be76eb96b06eef1849ac15.jsdos')">
              <h3>DOOM</h3>
              <div class="year">1993 - id Software</div>
              <div class="desc">The legendary first-person shooter that defined a genre. Shareware Episode 1: Knee-Deep in the Dead.</div>
              <span class="license">Shareware</span>
            </div>

            <div class="game-card" onclick="launchGame('Commander Keen 4 (Demo)', 'https://cdn.dos.zone/original/2X/5/5179dd46e52d8cdeca77e8b0c59c8a1dff24a4c7.jsdos')">
              <h3>Commander Keen 4</h3>
              <div class="year">1991 - id Software / Apogee</div>
              <div class="desc">Goodbye Galaxy! Help Billy Blaze save the galaxy in this beloved side-scrolling platformer.</div>
              <span class="license">Shareware</span>
            </div>

            <div class="game-card" onclick="launchGame('Prince of Persia', 'https://cdn.dos.zone/original/2X/b/b1652e9e57ef83d77f2c97edeb6d0d992c8a4133.jsdos')">
              <h3>Prince of Persia</h3>
              <div class="year">1990 - Broderbund</div>
              <div class="desc">Jordan Mechner's groundbreaking cinematic platformer. Escape the dungeon and save the princess!</div>
              <span class="license">Freeware</span>
            </div>

            <div class="game-card" onclick="launchGame('Wolfenstein 3D (Demo)', 'https://cdn.dos.zone/original/2X/a/a736763a8e51bdb8e2f30bccab17f1f12ec3d915.jsdos')">
              <h3>Wolfenstein 3D</h3>
              <div class="year">1992 - id Software</div>
              <div class="desc">The grandfather of first-person shooters. Escape Castle Wolfenstein!</div>
              <span class="license">Shareware</span>
            </div>

            <div class="game-card" onclick="launchGame('Oregon Trail', 'https://cdn.dos.zone/original/2X/9/94380d4e4d1feca5e13387ce3a023738e5e907f0.jsdos')">
              <h3>The Oregon Trail</h3>
              <div class="year">1990 - MECC</div>
              <div class="desc">The legendary educational game. Lead your pioneer family across America to Oregon!</div>
              <span class="license">Abandonware</span>
            </div>

          </div>
        </div>

        <div id="player-container">
          <div id="player-header">
            <h2 id="game-title">Game</h2>
            <button id="back-btn" onclick="backToList()">BACK TO GAMES</button>
          </div>
          <div id="dos"></div>
        </div>

        <div class="note">
          All games are freely distributable shareware, freeware, or abandonware titles.<br>
          Powered by <a href="https://js-dos.com" style="color: #00ff41;">js-dos</a> |
          Find more games at <a href="https://dos.zone" style="color: #00ff41;">dos.zone</a>
        </div>
      </div>

      <script>
        function launchGame(name, bundleUrl) {
          document.getElementById('game-list').style.display = 'none';
          document.getElementById('player-container').style.display = 'block';
          document.getElementById('game-title').textContent = name;

          var dosEl = document.getElementById('dos');
          dosEl.innerHTML = '';

          Dos(dosEl, { url: bundleUrl });
        }

        function backToList() {
          var dosEl = document.getElementById('dos');
          dosEl.innerHTML = '';
          document.getElementById('player-container').style.display = 'none';
          document.getElementById('game-list').style.display = 'block';
          location.reload();
        }
      </script>
    </body>
    </html>
